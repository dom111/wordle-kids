(()=>{var ut=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var a=(r,e,t)=>(ut(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},c=(r,e,t,n)=>(ut(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var N=(r,e,t)=>new Promise((n,s)=>{var i=v=>{try{m(t.next(v))}catch(y){s(y)}},d=v=>{try{m(t.throw(v))}catch(y){s(y)}},m=v=>v.done?n(v.value):Promise.resolve(v.value).then(i,d);m((t=t.apply(r,e)).next())});var pt=(s=>(s[s.UNKNOWN=-1]="UNKNOWN",s[s.WRONG=0]="WRONG",s[s.WRONG_PLACE=1]="WRONG_PLACE",s[s.RIGHT=2]="RIGHT",s))(pt||{}),E=pt;var z=class extends TypeError{},J=z;var At={[0]:"Free Play",[1]:"Daily",[2]:"Themed",[3]:"Custom"};var bt={[0]:"Easy",[1]:"Normal",[2]:"Hard"},Lt=[{label:"Animals",path:"./lists/themes/animals.json"}],Gt={3:"./lists/3-letter.json",4:"./lists/4-letter.json",5:"./lists/5-letter.json"},S,H,T,K,k,b,X=class{constructor(){p(this,S,void 0);p(this,H,void 0);p(this,T,{});p(this,K,void 0);p(this,k,"");p(this,b,[])}addAllValidWords(e){return N(this,null,function*(){yield Promise.all(e.map(t=>this.addValidWords(t)))})}addValidWords(e){return N(this,null,function*(){(yield(yield fetch(Gt[e])).json()).forEach(n=>a(this,b).push(n.toUpperCase()))})}currentWordLength(){return a(this,S).word.length}difficulty(){return bt[a(this,H)]}init(){return N(this,arguments,function*({difficulty:e,mode:t,lengths:n,theme:s}={difficulty:0,lengths:[3,4,5],mode:0}){if(c(this,K,t),c(this,H,e),t===2&&!s)throw new J("Expected `theme` when using `Mode.THEMED`.");if(t===2){yield this.setThemedGame(s,e);return}if(t===0){yield this.setFreePlay(n);return}})}letterScore(e){var t;return(t=a(this,T)[e])!=null?t:E.UNKNOWN}mode(){return At[a(this,K)]}score(e){let t=[...a(this,S).word];return t.reduce((n,s,i)=>(s===e[i]&&(a(this,T)[s]=n[i]=E.RIGHT,t[i]=null),n),new Array(this.currentWordLength()).fill(E.UNKNOWN)).map((n,s)=>{if(n===E.RIGHT)return n;let i=t.indexOf(e[s]);return i>-1?(t[i]=null,a(this,T)[e[s]]=E.WRONG_PLACE):a(this,T)[e[s]]=E.WRONG})}setFreePlay(e){return N(this,null,function*(){yield this.addAllValidWords(e);let t=a(this,b)[Math.floor(a(this,b).length*Math.random())].toUpperCase();c(this,S,{word:t,difficulty:0,clues:[]})})}setThemedGame(e,t){return N(this,null,function*(){let[n]=Lt.filter(f=>f.path===e);if(!n)throw new J("Unknown theme `${theme}`.");c(this,k,n.label);let i=(yield(yield fetch(n.path)).json()).words.filter(f=>f.difficulty<=t),d=i.reduce((f,{word:D})=>(f.includes(D.length)||f.push(D.length),f),[]);yield this.addAllValidWords(d),i.map(({word:f})=>f.toUpperCase()).forEach(f=>{a(this,b).includes(f)||a(this,b).push(f)});let{word:m,difficulty:v,clues:y}=i[Math.floor(i.length*Math.random())];c(this,S,{word:m.toUpperCase(),difficulty:v,clues:y})})}theme(){return a(this,k)}validate(e){return a(this,b).includes(e.join(""))}};S=new WeakMap,H=new WeakMap,T=new WeakMap,K=new WeakMap,k=new WeakMap,b=new WeakMap;var dt=X;var u;(function(r){r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator"})(u||(u={}));var g;(function(r){r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start"})(g||(g={}));var lt=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Wt=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,St=new Map([[126,g.Element],[94,g.Start],[36,g.End],[42,g.Any],[33,g.Not],[124,g.Hyphen]]),Tt=new Set(["has","not","matches","is","where","host","host-context"]);function mt(r){switch(r.type){case u.Adjacent:case u.Child:case u.Descendant:case u.Parent:case u.Sibling:case u.ColumnCombinator:return!0;default:return!1}}var Ot=new Set(["contains","icontains"]);function Nt(r,e,t){let n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function R(r){return r.replace(Wt,Nt)}function I(r){return r===39||r===34}function ct(r){return r===32||r===9||r===10||r===12||r===13}function tt(r){let e=[],t=ft(e,`${r}`,0);if(t<r.length)throw new Error(`Unmatched selector: ${r.slice(t)}`);return e}function ft(r,e,t){let n=[];function s(l){let o=e.slice(t+l).match(lt);if(!o)throw new Error(`Expected name, found ${e.slice(t)}`);let[h]=o;return t+=l+h.length,R(h)}function i(l){for(t+=l;t<e.length&&ct(e.charCodeAt(t));)t++}function d(){t+=1;let l=t,o=1;for(;o>0&&t<e.length;t++)e.charCodeAt(t)===40&&!m(t)?o++:e.charCodeAt(t)===41&&!m(t)&&o--;if(o)throw new Error("Parenthesis not matched");return R(e.slice(l,t-1))}function m(l){let o=0;for(;e.charCodeAt(--l)===92;)o++;return(o&1)===1}function v(){if(n.length>0&&mt(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function y(l){if(n.length>0&&n[n.length-1].type===u.Descendant){n[n.length-1].type=l;return}v(),n.push({type:l})}function f(l,o){n.push({type:u.Attribute,name:l,action:o,value:s(1),namespace:null,ignoreCase:"quirks"})}function D(){if(n.length&&n[n.length-1].type===u.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");r.push(n)}if(i(0),e.length===t)return t;t:for(;t<e.length;){let l=e.charCodeAt(t);switch(l){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==u.Descendant)&&(v(),n.push({type:u.Descendant})),i(1);break}case 62:{y(u.Child),i(1);break}case 60:{y(u.Parent),i(1);break}case 126:{y(u.Sibling),i(1);break}case 43:{y(u.Adjacent),i(1);break}case 46:{f("class",g.Element);break}case 35:{f("id",g.Equals);break}case 91:{i(1);let o,h=null;e.charCodeAt(t)===124?o=s(1):e.startsWith("*|",t)?(h="*",o=s(2)):(o=s(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(h=o,o=s(1))),i(0);let w=g.Exists,ot=St.get(e.charCodeAt(t));if(ot){if(w=ot,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(t)===61&&(w=g.Equals,i(1));let Q="",Z=null;if(w!=="exists"){if(I(e.charCodeAt(t))){let B=e.charCodeAt(t),W=t+1;for(;W<e.length&&(e.charCodeAt(W)!==B||m(W));)W+=1;if(e.charCodeAt(W)!==B)throw new Error("Attribute value didn't end");Q=R(e.slice(t+1,W)),t=W+1}else{let B=t;for(;t<e.length&&(!ct(e.charCodeAt(t))&&e.charCodeAt(t)!==93||m(t));)t+=1;Q=R(e.slice(B,t))}i(0);let ht=e.charCodeAt(t)|32;ht===115?(Z=!1,i(1)):ht===105&&(Z=!0,i(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;let Ct={type:u.Attribute,name:o,action:w,value:Q,namespace:h,ignoreCase:Z};n.push(Ct);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:u.PseudoElement,name:s(2).toLowerCase(),data:e.charCodeAt(t)===40?d():null});continue}let o=s(1).toLowerCase(),h=null;if(e.charCodeAt(t)===40)if(Tt.has(o)){if(I(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${o} cannot be quoted`);if(h=[],t=ft(h,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${o} (${e})`);t+=1}else{if(h=d(),Ot.has(o)){let w=h.charCodeAt(0);w===h.charCodeAt(h.length-1)&&I(w)&&(h=h.slice(1,-1))}h=R(h)}n.push({type:u.Pseudo,name:o,data:h});break}case 44:{D(),n=[],i(1);break}default:{if(e.startsWith("/*",t)){let w=e.indexOf("*/",t+2);if(w<0)throw new Error("Comment was not terminated");t=w+2,n.length===0&&i(0);break}let o=null,h;if(l===42)t+=1,h="*";else if(l===124){if(h="",e.charCodeAt(t+1)===124){y(u.ColumnCombinator),i(2);break}}else if(lt.test(e.slice(t)))h=s(0);else break t;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(o=h,e.charCodeAt(t+1)===42?(h="*",t+=2):h=s(1)),n.push(h==="*"?{type:u.Universal,namespace:o}:{type:u.Tag,name:h,namespace:o})}}}return D(),t}var Mt=r=>{for(;r.hasChildNodes();)r.firstChild.remove()},q=(r,e,t,n)=>r.addEventListener(e,t,n),Pt=(r,e,t,n)=>{e.forEach(s=>q(r,s,t,n))},O=(r,...e)=>{let[t]=tt(r).map(n=>n.reduce((s,i)=>{var d;return s===null&&i.type!=="tag"&&(s=document.createElement("div")),i.type==="tag"?document.createElement(i.name):(i.type==="attribute"&&i.name!=="class"&&s.setAttribute(i.name,(d=i.value)!=null?d:""),i.type==="attribute"&&i.name==="class"&&s.classList.add(i.value),s)},null));return e.forEach(n=>t.append(n)),t},L=r=>document.createTextNode(r),j,et=class{constructor(e,...t){p(this,j,void 0);c(this,j,O(e,...t))}on(e,t,n){q(this.element(),e,t,n)}onEach(e,t,n){Pt(this.element(),e,t,n)}append(...e){return this.element().append(...e)}element(){return a(this,j)}empty(){Mt(this.element())}};j=new WeakMap;var C=et;var M,nt=class extends C{constructor(){super("span.letter");p(this,M,"")}hasValue(){return a(this,M)!==""}highlight(t){if(t===E.RIGHT){this.element().classList.add("right");return}if(t===E.WRONG_PLACE){this.element().classList.add("wrong-place");return}if(t===E.WRONG){this.element().classList.add("wrong");return}}setValue(t){c(this,M,t),this.empty(),this.append(L(t))}value(){return a(this,M)}};M=new WeakMap;var _=nt;var A,U,rt=class extends C{constructor(t){super(".guess");p(this,A,[]);p(this,U,void 0);c(this,U,t);for(let n=0;n<t;n++)a(this,A).push(new _);this.append(...a(this,A).map(n=>n.element()))}applyScore(t){a(this,A).forEach((n,s)=>n.highlight(t[s]))}clearError(){this.element().classList.remove("error")}guess(){return a(this,A).map(t=>t.value())}highlightError(){this.element().classList.add("error")}length(){return a(this,A).filter(t=>t.hasValue()).length}onInput(t){if(!(t==="Backspace"&&this.length()===0)){if(t==="Backspace"){this.clearError(),a(this,A)[this.length()-1].setValue("");return}this.length()!==a(this,U)&&a(this,A)[this.length()].setValue(t)}}};A=new WeakMap,U=new WeakMap;var Et=rt;var G,P,it=class extends C{constructor(t){super("section.guesses");p(this,G,void 0);p(this,P,[]);c(this,G,t),this.addGuess()}addGuess(){a(this,P).push(new Et(a(this,G).currentWordLength())),this.append(this.currentGuess().element()),this.element().scrollTo({top:this.element().scrollHeight})}currentGuess(){return a(this,P)[a(this,P).length-1]}onInput(t){let n=this.currentGuess().guess(),s=this.currentGuess().length()===a(this,G).currentWordLength(),i=a(this,G).validate(n);if(t==="Enter"&&s&&i){let d=a(this,G).score(n);if(this.currentGuess().applyScore(d),d.every(m=>m===E.RIGHT))return;this.addGuess();return}t==="Enter"&&s&&!i&&this.currentGuess().highlightError(),t==="Backspace"&&this.currentGuess().onInput(t),t.match(/^[A-Z]$/i)&&this.currentGuess().onInput(t.toUpperCase())}};G=new WeakMap,P=new WeakMap;var gt=it;var st=class extends C{constructor(e){super("nav.header",O("h1",L("Wordle Kids")),O("h3",L(`${e.mode()}${e.theme()?` (${e.theme()})`:""} - ${e.difficulty()}`)),O("p",L("A kid-friendly Wordle clone with small words.")))}},vt=st;var yt={["Backspace"]:"\u232B"},F,V,$,Y,at=class extends C{constructor(t,n){super("section.keyboard[autofocus]");p(this,F,void 0);p(this,V,void 0);p(this,$,{});p(this,Y,[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Backspace","Z","X","C","V","B","N","M","Enter"]]);this.append(...a(this,Y).map(s=>O("section.row",...s.map(i=>{var m;let d=new _;return a(this,$)[i]=d,d.setValue(i),d.element().setAttribute("data-key",i),Object.prototype.hasOwnProperty.call(yt,i)&&(d.empty(),d.append(L((m=yt[i])!=null?m:i))),d.on("click",()=>this.handleInput(i)),d.element()})))),c(this,V,t),c(this,F,n),this.bindKeyboard()}bindKeyboard(){q(document,"keydown",t=>this.handleInput(t.key))}handleInput(t){a(this,V).onInput(t),a(this,Y).flat().forEach(n=>{let s=a(this,$)[n],i=a(this,F).letterScore(n);s.highlight(i)})}};F=new WeakMap,V=new WeakMap,$=new WeakMap,Y=new WeakMap;var wt=at;var x=new dt;x.init({mode:2,difficulty:0,theme:"./lists/themes/animals.json"}).then(()=>{let r=new vt(x),e=new gt(x),t=new wt(e,x);document.getElementById("app").append(r.element(),e.element(),t.element())});})();
//# sourceMappingURL=app.js.map
