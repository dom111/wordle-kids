(()=>{var Y=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var o=(r,e,t)=>(Y(r,e,"read from private field"),t?t.call(r):e.get(r)),m=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},g=(r,e,t,n)=>(Y(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var N,q=class{constructor(e){m(this,N,void 0);g(this,N,e)}element(){return o(this,N)}};N=new WeakMap;var l=q;var u;(function(r){r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator"})(u||(u={}));var f;(function(r){r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start"})(f||(f={}));var x=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,ut=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,ht=new Map([[126,f.Element],[94,f.Start],[36,f.End],[42,f.Any],[33,f.Not],[124,f.Hyphen]]),pt=new Set(["has","not","matches","is","where","host","host-context"]);function tt(r){switch(r.type){case u.Adjacent:case u.Child:case u.Descendant:case u.Parent:case u.Sibling:case u.ColumnCombinator:return!0;default:return!1}}var mt=new Set(["contains","icontains"]);function ft(r,e,t){let n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function S(r){return r.replace(ut,ft)}function H(r){return r===39||r===34}function I(r){return r===32||r===9||r===10||r===12||r===13}function K(r){let e=[],t=et(e,`${r}`,0);if(t<r.length)throw new Error(`Unmatched selector: ${r.slice(t)}`);return e}function et(r,e,t){let n=[];function h(p){let a=e.slice(t+p).match(x);if(!a)throw new Error(`Expected name, found ${e.slice(t)}`);let[s]=a;return t+=p+s.length,S(s)}function i(p){for(t+=p;t<e.length&&I(e.charCodeAt(t));)t++}function A(){t+=1;let p=t,a=1;for(;a>0&&t<e.length;t++)e.charCodeAt(t)===40&&!P(t)?a++:e.charCodeAt(t)===41&&!P(t)&&a--;if(a)throw new Error("Parenthesis not matched");return S(e.slice(p,t-1))}function P(p){let a=0;for(;e.charCodeAt(--p)===92;)a++;return(a&1)===1}function Q(){if(n.length>0&&tt(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function y(p){if(n.length>0&&n[n.length-1].type===u.Descendant){n[n.length-1].type=p;return}Q(),n.push({type:p})}function z(p,a){n.push({type:u.Attribute,name:p,action:a,value:h(1),namespace:null,ignoreCase:"quirks"})}function Z(){if(n.length&&n[n.length-1].type===u.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");r.push(n)}if(i(0),e.length===t)return t;t:for(;t<e.length;){let p=e.charCodeAt(t);switch(p){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==u.Descendant)&&(Q(),n.push({type:u.Descendant})),i(1);break}case 62:{y(u.Child),i(1);break}case 60:{y(u.Parent),i(1);break}case 126:{y(u.Sibling),i(1);break}case 43:{y(u.Adjacent),i(1);break}case 46:{z("class",f.Element);break}case 35:{z("id",f.Equals);break}case 91:{i(1);let a,s=null;e.charCodeAt(t)===124?a=h(1):e.startsWith("*|",t)?(s="*",a=h(2)):(a=h(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(s=a,a=h(1))),i(0);let d=f.Exists,J=ht.get(e.charCodeAt(t));if(J){if(d=J,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(t)===61&&(d=f.Equals,i(1));let U="",M=null;if(d!=="exists"){if(H(e.charCodeAt(t))){let T=e.charCodeAt(t),w=t+1;for(;w<e.length&&(e.charCodeAt(w)!==T||P(w));)w+=1;if(e.charCodeAt(w)!==T)throw new Error("Attribute value didn't end");U=S(e.slice(t+1,w)),t=w+1}else{let T=t;for(;t<e.length&&(!I(e.charCodeAt(t))&&e.charCodeAt(t)!==93||P(t));)t+=1;U=S(e.slice(T,t))}i(0);let X=e.charCodeAt(t)|32;X===115?(M=!1,i(1)):X===105&&(M=!0,i(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;let ot={type:u.Attribute,name:a,action:d,value:U,namespace:s,ignoreCase:M};n.push(ot);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:u.PseudoElement,name:h(2).toLowerCase(),data:e.charCodeAt(t)===40?A():null});continue}let a=h(1).toLowerCase(),s=null;if(e.charCodeAt(t)===40)if(pt.has(a)){if(H(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${a} cannot be quoted`);if(s=[],t=et(s,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${a} (${e})`);t+=1}else{if(s=A(),mt.has(a)){let d=s.charCodeAt(0);d===s.charCodeAt(s.length-1)&&H(d)&&(s=s.slice(1,-1))}s=S(s)}n.push({type:u.Pseudo,name:a,data:s});break}case 44:{Z(),n=[],i(1);break}default:{if(e.startsWith("/*",t)){let d=e.indexOf("*/",t+2);if(d<0)throw new Error("Comment was not terminated");t=d+2,n.length===0&&i(0);break}let a=null,s;if(p===42)t+=1,s="*";else if(p===124){if(s="",e.charCodeAt(t+1)===124){y(u.ColumnCombinator),i(2);break}}else if(x.test(e.slice(t)))s=h(0);else break t;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(a=s,e.charCodeAt(t+1)===42?(s="*",t+=2):s=h(1)),n.push(s==="*"?{type:u.Universal,namespace:a}:{type:u.Tag,name:s,namespace:a})}}}return Z(),t}var c=(r,...e)=>{let[t]=K(r).map(n=>n.reduce((h,i)=>{var A;if(h===null&&i.type!=="tag")throw new Error("Unexpected.");return i.type==="tag"?document.createElement(i.name):(i.type==="attribute"&&i.name!=="class"&&h.setAttribute(i.name,(A=i.value)!=null?A:""),i.type==="attribute"&&i.name==="class"&&h.classList.add(i.value),h)},null));return e.forEach(n=>t.append(n)),t},L=r=>document.createTextNode(r);var E,R=class extends l{constructor(){super(c("span.letter"));m(this,E,"")}hasValue(){return o(this,E)!==""}highlight(t){if(t===2){this.element().classList.add("right");return}if(t===1){this.element().classList.add("wrong-place");return}}setValue(t){g(this,E,t),this.element().childNodes.forEach(n=>n.remove()),this.element().append(L(t))}value(){return o(this,E)}};E=new WeakMap;var O=R;var C,$,D=class extends l{constructor(){super(c("div.guess"));m(this,C,[]);m(this,$,["","",""]);o(this,C).push(new O,new O,new O),this.element().append(...o(this,C).map(t=>t.element()))}applyScore(t){o(this,C).forEach((n,h)=>n.highlight(t[h]))}guess(){return o(this,C).map(t=>t.value())}length(){return o(this,C).filter(t=>t.hasValue()).length}onInput(t){if(!(t==="Backspace"&&this.length()===0)){if(t==="Backspace"){o(this,C)[this.length()-1].setValue("");return}this.length()!==3&&o(this,C)[this.length()].setValue(t)}}};C=new WeakMap,$=new WeakMap;var F=D;var G,b,V=class extends l{constructor(t){super(c("section.guesses"));m(this,G,void 0);m(this,b,[]);g(this,G,t),o(this,b).push(new F),this.element().append(this.currentGuess().element())}currentGuess(){return o(this,b)[o(this,b).length-1]}onInput(t){if(t==="Enter"&&this.currentGuess().length()===3){let n=o(this,G).score(this.currentGuess().guess());this.currentGuess().applyScore(n),o(this,b).push(new F),this.element().append(this.currentGuess().element());return}t==="Backspace"&&this.currentGuess().onInput(t),t.match(/^[A-Z]$/i)&&this.currentGuess().onInput(t.toUpperCase())}};G=new WeakMap,b=new WeakMap;var rt=V;var j=class extends l{constructor(){super(c("nav",c("h1",L("Wordle Kids")),c("p",L("A kid-friendly Wordle clone with three-letter words."))))}},nt=j;var W,B=class extends l{constructor(t){super(c("section.keyboard[autofocus]"));m(this,W,void 0);g(this,W,t),this.bindKeyboard()}bindKeyboard(){document.addEventListener("keydown",t=>o(this,W).onInput(t.key))}};W=new WeakMap;var it=B;var k,v,_=class{constructor(){m(this,k,void 0);m(this,v,[]);this.getWordlist(),this.setCurrentWord()}getWordlist(){o(this,v).push("bat","cat","eat","fat","hat","mat","pat","rat","sat","vat")}score(e){let t=[...o(this,k)];return t.reduce((n,h,i)=>(h===e[i]&&(n[i]=2,t[i]=null),n),[-1,-1,-1]).map((n,h)=>{if(n===2)return n;let i=t.indexOf(e[h]);return i>-1?(t[i]=null,1):n})}setCurrentWord(){g(this,k,[...o(this,v)[Math.floor(o(this,v).length*Math.random())].toUpperCase()])}};k=new WeakMap,v=new WeakMap;var at=_;var dt=document.getElementById("app"),gt=new nt,st=new rt(new at),lt=new it(st);dt.append(gt.element(),st.element(),lt.element());})();
//# sourceMappingURL=app.js.map
